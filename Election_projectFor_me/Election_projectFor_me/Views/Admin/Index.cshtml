@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_LayoutPage1.cshtml";
}


@model IEnumerable<Election_projectFor_me.Models.Ad>




<div class="container mt-5">
    <h3>Admin Dashboard</h3>
    <form id="bulkActionForm" method="post" action="@Url.Action("BulkAction", "Admin")">
        <table class="table table-bordered table-responsive table-hover">
            <thead>
                <tr>
                    <th><input type="checkbox" id="selectAll"></th>
                    <th>عنوان الاعلان</th>
                    <th>اسم المرشح</th>
                    <th>نوع الترشح</th>
                    <th>محتوى الاعلان</th>
                    <th>رابط الاعلان</th>
                    <th>تعليق الادمن</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var ad in Model)
                {
                    <tr>
                        <td><input type="checkbox" name="selectedIds" value="@ad.AdID" class="select-row"></td>
                        <td>@ad.Title</td>
                        <td>@ad.CandidateName</td>
                        <td>@ad.Type</td>
                        <td>@ad.Content</td>
                        <td>@ad.URLPath</td>
                        <td>
                            <textarea name="adminComments[@ad.AdID]" class="form-control mb-2" placeholder="Admin comment (optional)"></textarea>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
        <input type="hidden" id="bulkActionType" name="action" value="">
        <button type="button" id="approveSelected" class="btn btn-success btn-sm">الموافقة على المحدد</button>
        <button type="button" id="rejectSelected" class="btn btn-danger btn-sm">رفض المحدد</button>
    </form>
</div>

<style>
    /* Style for the table headers */
    body{

        direction :rtl;
    }
    .table th {
        font-weight: 600;
        background-color: #f8f9fa; /* Light grey background */
        text-align: left;
    }

    /* Style for the table rows */
    .table td {
        vertical-align: middle;
    }

    /* Style for the action buttons */
    .btn-success {
        background-color: green;
        border-color: green;
    }

    .btn-danger {
        background-color: red;
        border-color: red;
    }

    .btn {
        width: 150px;
        margin-right: 10px;
    }

    .table textarea {
        width: 100%;
        margin-bottom: 10px;
    }

    .container h3 {
        font-size: 1.5rem;
        font-weight: 500;
        margin-bottom: 20px;
    }

    /* Style for the select all checkbox */
    #selectAll {
        margin: 0;
    }
</style>

<script>
    document.addEventListener("DOMContentLoaded", function () {
        const selectAllCheckbox = document.getElementById("selectAll");
        const rowCheckboxes = document.querySelectorAll(".select-row");
        const approveSelectedButton = document.getElementById("approveSelected");
        const rejectSelectedButton = document.getElementById("rejectSelected");
        const bulkActionForm = document.getElementById("bulkActionForm");
        const bulkActionType = document.getElementById("bulkActionType");

        selectAllCheckbox.addEventListener("change", function () {
            rowCheckboxes.forEach(checkbox => checkbox.checked = selectAllCheckbox.checked);
        });

        approveSelectedButton.addEventListener("click", function () {
            bulkActionType.value = "Approve";
            bulkActionForm.submit();
        });

        rejectSelectedButton.addEventListener("click", function () {
            bulkActionType.value = "Reject";
            bulkActionForm.submit();
        });
    });
</script>

